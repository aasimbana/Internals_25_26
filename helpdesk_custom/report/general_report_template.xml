<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <template id="general_report_template">
        <t t-call="web.external_layout">
            <main class="page">

                
                <div style="width:100%; margin: 30px 0 25px 0; display:flex; justify-content:space-between; align-items:center; font-size:14px;">
                    <div style="text-align:left; font-size:18px; font-weight:bold; color:#366092;">
                        General Helpdesk Report by Date
                    </div>
                    <div style="text-align:right; font-style:italic; color:#444;">
                        <strong>From:</strong> <t t-esc="data.get('start_date', 'N/A')"/> <br/>
                        <strong>To:</strong> <t t-esc="data.get('end_date', 'N/A')"/>
                    </div>
                </div>

            
                <table style="width:100%; border-collapse:collapse; border:1px solid #000; margin-bottom: 20px; font-size:12px;">
                    <thead>
                        <tr style="background-color: #D9E1F2;">
                            <th style="border:1px solid #000; padding:8px; text-align:left;">DATE</th>
                            <t t-foreach="data.get('stage_types', [])" t-as="st">
                                <th style="border:1px solid #000; padding:8px; text-align:center;">
                                    <strong><t t-esc="st.upper()"/></strong>
                                </th>
                            </t>
                            <th style="border:1px solid #000; padding:8px; text-align:center;"><strong>TOTAL</strong></th>
                        </tr>
                    </thead>
                    <tbody>
                   
                        <t t-foreach="data.get('rows', [])" t-as="row">
                            <tr>
                                <td style="border:1px solid #000; padding:6px; text-align:left; font-weight:bold; background-color:#F2F2F2;">
                                    <t t-esc="row.get('date')"/>
                                </td>
                                <t t-foreach="data.get('stage_types', [])" t-as="st">
                                    <td style="border:1px solid #000; padding:6px; text-align:center;">
                                        <t t-esc="row.get('states', {}).get(st, 0)"/>
                                    </td>
                                </t>
                                <td style="border:1px solid #000; padding:6px; text-align:center; font-weight:bold;">
                                    <t t-esc="row.get('total', 0)"/>
                                </td>
                            </tr>
                        </t>

                      
                        <tr style="background-color: #E2EFDA;">
                            <td style="border:1px solid #000; padding:8px; text-align:right; font-weight:bold;">
                                TOTAL
                            </td>
                            <t t-foreach="data.get('stage_types', [])" t-as="st">
                                <td style="border:1px solid #000; padding:8px; text-align:center; font-weight:bold;">
                                    <t t-esc="data.get('total_by_state', {}).get(st, 0)"/>
                                </td>
                            </t>
                            <td style="border:1px solid #000; padding:8px; text-align:center; font-weight:bold;">
                                <t t-esc="data.get('grand_total', 0)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div style="text-align: center; margin-top: 30px; font-style: italic; color: #666;">
                    <strong>Generated on:</strong> <t t-esc="data.get('generated_at', '')"/> <br/>
                    <strong>Company:</strong> <t t-esc="data.get('company_name', '')"/>
                </div>
            </main>
        </t>
    </template>
   
    <template id="general_report_template">
        <t t-call="web.html_container">
            <t t-call="helpdesk_custom.general_report_template_document"/>
        </t>
    </template>
</odoo>
